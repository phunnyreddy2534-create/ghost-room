<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>IRA — Silent Anonymous Rooms</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#141633" />

  <!-- Main styles -->
  <link rel="stylesheet" href="style.css" />

  <!-- PWA -->
  <link rel="manifest" href="/manifest.json" />
  <link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192.png" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

  <!-- Index-only refinements -->
  <style>
    /* ===== Splash ===== */
    #appSplash{
      position:fixed;
      inset:0;
      background:radial-gradient(circle at top,#161844,#0A0B14 70%);
      display:flex;
      align-items:center;
      justify-content:center;
      z-index:9999;
      animation:fadeOut 0.8s ease forwards;
      animation-delay:2.4s;
    }
    #appSplash svg{
      width:88px;
      height:88px;
    }

    @keyframes fadeOut{
      to{ opacity:0; visibility:hidden }
    }

    /* ===== Header ===== */
    .top{
      display:flex;
      align-items:center;
      padding:14px 18px;
      background:rgba(10,11,20,.75);
      backdrop-filter:blur(10px);
      border-bottom:1px solid rgba(255,255,255,.06);
    }

    .logo{
      display:flex;
      align-items:center;
      gap:12px;
    }

    .ira-logo{
      width:34px;
      height:34px;
    }

    .logo-text{
      font-weight:600;
      letter-spacing:.4px;
    }

    /* ===== Hero ===== */
    .home{
      padding:48px 20px 100px;
      max-width:720px;
      margin:0 auto;
      text-align:left;
    }

    .hero-title{
      font-size:36px;
      line-height:1.15;
      margin:0 0 12px;
    }

    .hero-sub{
      font-size:16px;
      line-height:1.6;
      color:rgba(255,255,255,.65);
      max-width:520px;
    }

    /* ===== Actions ===== */
    .room-actions{
      display:flex;
      gap:14px;
      margin-top:34px;
      flex-wrap:wrap;
    }

    .room-actions button{
      min-width:140px;
    }

    /* ===== Fade anchor ===== */
    .fade-anchor{
      position:fixed;
      left:0;
      right:0;
      bottom:0;
      height:160px;
      pointer-events:none;
      background:linear-gradient(
        to bottom,
        rgba(10,11,20,0),
        rgba(10,11,20,.9)
      );
    }

    /* ===== Animated logo wave ===== */
    .ira-wave{
      animation:waveMove 7s ease-in-out infinite;
    }

    @keyframes waveMove{
      0%,100%{ transform:translateY(0) }
      50%{ transform:translateY(-2px) }
    }

    @media (prefers-reduced-motion: reduce){
      .ira-wave{ animation:none }
      #appSplash{ animation:none }
    }
  </style>
</head>

<body>

<!-- SPLASH -->
<div id="appSplash">
  <svg viewBox="0 0 100 100" aria-hidden="true">
    <circle cx="50" cy="50" r="42"
      fill="none"
      stroke="#8E97FF"
      stroke-width="4"/>
    <path class="ira-wave"
      d="M20 52 C30 46 40 46 50 52 C60 58 70 58 80 52"
      fill="none"
      stroke="#6F7CFF"
      stroke-width="3"
      stroke-linecap="round"/>
  </svg>
</div>

<header class="top">
  <div class="logo">
    <!-- Inline SVG for crisp animation -->
    <svg class="ira-logo" viewBox="0 0 100 100" aria-hidden="true">
      <circle cx="50" cy="50" r="42"
        fill="none"
        stroke="#6F7CFF"
        stroke-width="4"/>
      <path class="ira-wave"
        d="M20 52 C30 46 40 46 50 52 C60 58 70 58 80 52"
        fill="none"
        stroke="#8E97FF"
        stroke-width="3"
        stroke-linecap="round"/>
    </svg>
    <span class="logo-text">IRA</span>
  </div>
</header>

<main class="home" role="main">
  <h1 class="hero-title">Speak freely.</h1>

  <p class="hero-sub">
    Private rooms that appear quietly — and vanish without a trace.
  </p>

  <div class="room-actions">
    <button class="primary-btn" id="createBtn">
      Create Room
    </button>
    <button class="secondary-btn" id="joinBtn">
      Join Room
    </button>
  </div>

  <div id="statusMessage"
    style="margin-top:18px;font-size:13px;color:rgba(255,255,255,.5)">
  </div>
</main>

<div class="fade-anchor"></div>

<!-- Optional config -->
<script src="config.js" defer></script>

<script>
  function makeRoomId(){
    return Math.random().toString(36).slice(2,9);
  }

  function goToRoom(id){
    location.href = `room.html?room=${encodeURIComponent(id)}`;
  }

  document.addEventListener("DOMContentLoaded", ()=>{
    const createBtn = document.getElementById("createBtn");
    const joinBtn = document.getElementById("joinBtn");
    const status = document.getElementById("statusMessage");

    createBtn.onclick = ()=>{
      goToRoom(makeRoomId());
    };

    joinBtn.onclick = ()=>{
      let code = prompt("Enter room code or link:");
      if(!code) return;

      try{
        const u = new URL(code, location.href);
        code = u.searchParams.get("room") || code;
      }catch(e){}

      code = code.trim();
      if(code) goToRoom(code);
    };

    if("serviceWorker" in navigator){
      navigator.serviceWorker.register("/sw.js")
        .then(()=>{
          status.textContent =
            "You can install IRA from your browser menu.";
        })
        .catch(()=>{
          status.textContent = "";
        });
    }
  });
</script>

</body>
</html>
